<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Protocolo Ni√±o - {{ paciente.nombre_completo }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            color: #333;
            line-height: 1.4;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            max-height: 60px;
        }
        h1 {
            font-size: 18px;
            color: #0056b3;
            margin: 0;
        }
        .info-box {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
        }
        .section-title {
            background: #e9ecef;
            padding: 5px 10px;
            font-weight: bold;
            color: #0056b3;
            margin: 15px 0 10px 0;
            border-left: 4px solid #0056b3;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        .col {
            flex: 1;
            padding: 0 10px;
        }
        .field {
            margin-bottom: 5px;
        }
        .label {
            font-weight: bold;
            color: #555;
        }
        .check-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .check-item::before {
            content: "‚òë ";
            color: #0056b3;
        }
        .footer {
            margin-top: 30px;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            text-align: center;
            font-size: 10px;
            color: #777;
        }
        
        @media print {
            .no-print {
                display: none;
            }
            body {
                padding: 0;
            }
        }
    </style>
</head>
<body onload="window.print()">
    <div class="no-print" style="margin-bottom: 20px; text-align: right;">
        <button onclick="window.print()" style="padding: 10px 20px; background: #0056b3; color: white; border: none; cursor: pointer;">üñ®Ô∏è Imprimir / Guardar como PDF</button>
        <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; cursor: pointer;">Cerrar</button>
    </div>

    <div class="header">
        <div>
            <h1>PROTOCOLO DE SALUD INFANTIL</h1>
            <div>{{ config.nombre_consultorio|default:"Consultorio Dental" }}</div>
        </div>
        {% if config.logo %}
            <img src="{{ config.logo.url }}" class="logo" alt="Logo">
        {% endif %}
    </div>

    <div class="info-box">
        <div><strong>Paciente:</strong> {{ paciente.nombre_completo }}</div>
        <div><strong>Edad:</strong> {{ protocolo.edad_protocolo }} a√±os</div>
        <div><strong>Fecha:</strong> {{ protocolo.fecha|date:"d/m/Y" }}</div>
    </div>

    <!-- EVALUACI√ìN F√çSICA -->
    <div class="section-title">EVALUACI√ìN F√çSICA Y RESPIRATORIA</div>
    <div class="row">
        <div class="col">
            <div class="field"><span class="label">Ventana m√°s cerrada:</span> {{ protocolo.get_ventana_mas_cerrada_display|default:"-" }}</div>
            <div class="field"><span class="label">Respira mejor por:</span> {{ protocolo.get_respira_mejor_display|default:"-" }}</div>
            <div class="field"><span class="label">Sellado labial reposo:</span> {{ protocolo.sellado_labial_reposo|yesno:"S√≠,No" }}</div>
            <div class="field"><span class="label">Fascies adenoidea:</span> {{ protocolo.fascies_adenoidea|yesno:"S√≠,No" }}</div>
        </div>
        <div class="col">
            <div class="field"><span class="label">Patr√≥n crecimiento:</span> {{ protocolo.get_patron_crecimiento_display|default:"-" }}</div>
            <div class="field"><span class="label">Maloclusi√≥n:</span> {{ protocolo.get_maloclusion_display|default:"-" }}</div>
            <div class="field"><span class="label">Mordida cruzada:</span> {{ protocolo.get_mordida_cruzada_display|default:"-" }}</div>
            <div class="field"><span class="label">Am√≠gdalas:</span> {{ protocolo.get_amigdalas_grado_display|default:"-" }}</div>
        </div>
    </div>

    <!-- FUNCIONAL -->
    <div class="section-title">CAPACIDAD MASTICATORIA Y FUNCIONAL</div>
    <div class="row">
        <div class="col">
            <div class="field"><span class="label">Masticador:</span> 
                {% if protocolo.masticador_derecho %}Derecho{% endif %} 
                {% if protocolo.masticador_izquierdo %}Izquierdo{% endif %}
            </div>
            <div class="field"><span class="label">Prefiere:</span>
                {% if protocolo.prefiere_yogurt %}Yogurt, {% endif %}
                {% if protocolo.prefiere_manzana %}Manzana, {% endif %}
                {% if protocolo.prefiere_naranja %}Naranja, {% endif %}
                {% if protocolo.prefiere_zumo %}Zumo{% endif %}
            </div>
        </div>
        <div class="col">
            <div class="field"><span class="label">Tiempo comer:</span> {{ protocolo.get_tiempo_comer_display|default:"-" }}</div>
            <div class="field"><span class="label">Corta bocados:</span> {{ protocolo.corta_bocados|yesno:"S√≠,No" }}</div>
            <div class="field"><span class="label">Respirador oral:</span> {{ protocolo.es_respirador_oral|yesno:"S√≠,No" }}</div>
        </div>
    </div>

    <!-- SUE√ëO Y DEGLUCI√ìN -->
    <div class="section-title">SUE√ëO, DEGLUCI√ìN Y LENGUA</div>
    <div class="row">
        <div class="col">
            <div class="field"><span class="label">Respiraci√≥n nocturna:</span> {{ protocolo.get_respiracion_nocturna_display|default:"-" }}</div>
            <div class="field"><span class="label">Movilidad dormir:</span> {{ protocolo.get_movilidad_dormir_display|default:"-" }}</div>
            <div class="field"><span class="label">Bruxismo:</span> {{ protocolo.get_bruxismo_display|default:"-" }}</div>
        </div>
        <div class="col">
            <div class="field"><span class="label">Degluci√≥n:</span>
                {% if protocolo.deglucion_normal %}Normal{% endif %}
                {% if protocolo.deglucion_dificultad %}Dificultad{% endif %}
            </div>
            <div class="field"><span class="label">Lengua:</span>
                {% if protocolo.lengua_alcanza_nariz %}Muy suelta{% endif %}
                {% if protocolo.lengua_apenas_incisivos %}Frenectom√≠a segura{% endif %}
            </div>
        </div>
    </div>

    <!-- HISTORIAL -->
    <div class="section-title">HISTORIAL M√âDICO Y ALERGIAS</div>
    <div class="row">
        <div class="col">
            <div class="field"><span class="label">Alergias:</span> {{ protocolo.es_alergico|yesno:"S√≠,No" }} ({{ protocolo.alergico_a }})</div>
            <div class="field"><span class="label">Medicamentos:</span> {{ protocolo.medicacion_actual|default:"Ninguno" }}</div>
        </div>
        <div class="col">
            <div class="field"><span class="label">Resfr√≠os/a√±o:</span> {{ protocolo.get_veces_resfrio_display|default:"-" }}</div>
            <div class="field"><span class="label">Antibi√≥ticos/a√±o:</span> {{ protocolo.get_veces_antibioticos_display|default:"-" }}</div>
        </div>
    </div>

    <!-- EVALUACI√ìN GENERAL -->
    <div class="section-title">EVALUACI√ìN GENERAL</div>
    <div class="row">
        <div class="col">
            <div class="field"><span class="label">Masticaci√≥n:</span> {{ protocolo.get_masticacion_eval_display|default:"-" }}</div>
            <div class="field"><span class="label">Respiraci√≥n:</span> {{ protocolo.get_respiracion_eval_display|default:"-" }}</div>
        </div>
        <div class="col">
            <div class="field"><span class="label">Fonaci√≥n:</span> {{ protocolo.get_fonacion_display|default:"-" }}</div>
            <div class="field"><span class="label">Actividad f√≠sica:</span> {{ protocolo.get_actividad_fisica_display|default:"-" }}</div>
        </div>
    </div>

    <div class="field" style="margin-top: 10px;">
        <span class="label">Estado General:</span> 
        {% if protocolo.estado_satisfactorio %}Satisfactorio{% endif %}
        {% if protocolo.estado_mejorable %}Mejorable{% endif %}
        {% if protocolo.estado_muy_mejorable %}Muy Mejorable{% endif %}
    </div>

    <!-- PLAN DE TRATAMIENTO -->
    <div class="section-title">PLAN DE TRATAMIENTO RECOMENDADO</div>
    <ul class="check-list">
        {% if protocolo.plan_refuerzo_habitos %}<li class="check-item">Solo refuerzo de h√°bitos saludables</li>{% endif %}
        {% if protocolo.plan_placa_confort %}<li class="check-item">Uso de PlacaConfort y recomendaciones</li>{% endif %}
        {% if protocolo.plan_deglu_confort %}<li class="check-item">Uso de DegluConfort y recomendaciones</li>{% endif %}
        {% if protocolo.plan_nariz_confort %}<li class="check-item">Uso de NarizConfort y recomendaciones</li>{% endif %}
        {% if protocolo.plan_mascalin %}<li class="check-item">Uso de Mascal√≠n (>5 a√±os)</li>{% endif %}
        {% if protocolo.plan_retirada_lacteos %}<li class="check-item">Retirada de l√°cteos (1 mes)</li>{% endif %}
        {% if protocolo.plan_evitar_azucar %}<li class="check-item">Evitar az√∫car y harinas refinadas</li>{% endif %}
        {% if protocolo.plan_alimentos_duros %}<li class="check-item">Aumentar ingesta de alimentos duros/correosos</li>{% endif %}
        {% if protocolo.plan_comer_sin_cubiertos %}<li class="check-item">Comer sin cubiertos para estimular tacto</li>{% endif %}
        {% if protocolo.plan_comer_lado %}<li class="check-item">Comer preferentemente por lado: {{ protocolo.get_plan_comer_lado_display }}</li>{% endif %}
    </ul>

    {% if protocolo.observaciones or protocolo.antecedentes_interes %}
    <div class="section-title">OBSERVACIONES ADICIONALES</div>
    <p>{{ protocolo.antecedentes_interes }}</p>
    {% endif %}

    <div class="footer">
        Documento generado el {% now "d/m/Y H:i" %} - {{ config.nombre_consultorio }}
    </div>
</body>
</html>
